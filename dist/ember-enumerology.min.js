/*! ember-enumerology - v0.3.0 - 2013-11-06
* https://github.com/jamesotron/ember-enumerology
* Copyright (c) 2013 James Harton; Licensed MIT */
(function(){}).call(this),function(){window.Enumerology=Em.Namespace.create({VERSION:"0.2.4",create:function(a){return Enumerology.Pipeline.create({dependentKey:a})}})}.call(this),function(){Enumerology.FilterBase=Em.Object.extend({initialValue:void 0,subArray:void 0,init:function(){return this.set("initialValue",Em.A()),this.set("subArray",new Ember.SubArray),this._super()},apply:function(a,b){var c,d=this;return c=""+a+this.get("dependencies"),this.set("dependentKey",a),Em.arrayComputed(c,{initialValue:this.get("initialValue"),initialize:function(a,c,d){return c.binding=b,Em.isEmpty(this.reset)?void 0:this.reset.call(this,a,c,d)},addedItem:function(a,b,c){return d.addedItem.call(d,a,b,c)},removedItem:function(a,b,c){return d.removedItem.call(d,a,b,c)}})},removedItem:function(a,b,c){var d;return d=this.get("subArray").removeItem(c.index),d>-1&&a.get("length")>d&&a.removeAt(d),a}}),Enumerology.FilterBase.reopenClass({isReduce:!1,isFilter:Em.computed.not("isReduce")})}.call(this),function(){var a,b,c,d,e,f,g,h,i=[].slice;c=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},b=function(a,b){if(!b)throw new Error(a)},e=function(a,b){return d(a.toString(),b.toString())},f=function(a,b){return d(Number(a),Number(b))},d=function(a,b){return a>b?1:b>a?-1:0},a=function(a,d){var e;return null==d&&(d={}),d.pipeline=this,e=Enumerology.Transform[c(a)].extend(d),this.get("transformations.length")>0&&b("Cannot add any further operations after a reduce operation",this.get("transformations.lastObject.isFilter")),this.get("transformations").addObject(e),this},h=function(a,b){return Em.isEmpty(a.__enumerology__)&&(a.__enumerology__={}),Em.isEmpty(a.__enumerology__[b])&&(a.__enumerology__[b]=Em.Object.create()),a.__enumerology__[b]},g=Em.Object.extend({init:function(){return this._super(),this.all=this.every,this.allBy=this.isEvery,this.isAll=this.isEvery,this.anyBy=this.isAny,this.everyBy=this.isEvery,this.getEach=this.mapBy,this.mapProperty=this.mapBy,this.size=this.length,this.tee=this.invoke,this.some=this.nonEmpty,this.someBy=this.nonEmptyBy,this.set("transformations",Em.A())},finalize:function(){var a,c,d;return a=this.get("dependentKey"),b("Must have a dependent key",!Em.isEmpty(a)),d=this.get("transformations"),b("Must have at least one transformation applied",d.get("length")>0),c=""+a+d.get("firstObject").create().get("dependencies"),Em.computed(c,function(b){var c,e;return e=this,c=Em.meta(e),g=h(c,b),Em.isEmpty(g.get("target"))&&(g.set("target",e),g.set("lastKey","target."+a),d.forEach(function(a,b){var c,d;return d=a.create(),c=d.apply(g.get("lastKey"),e),g.set("transform_"+b,d),g.set("computed_"+b,c),g.set("lastKey","result_"+b),Em.defineProperty(g,g.get("lastKey"),c)})),g.get(g.get("lastKey"))})},any:function(b){return a.call(this,"any",{callback:b})},compact:function(){return a.call(this,"compact",{})},compactBy:function(b){return a.call(this,"compactBy",{key:b})},contains:function(b){return a.call(this,"contains",{obj:b})},empty:function(){return a.call(this,"empty")},emptyBy:function(b){return a.call(this,"emptyBy",{key:b})},every:function(b,c){return null==c&&(c=null),a.call(this,"every",{callback:b,target:c})},filter:function(b,c){return null==c&&(c=null),a.call(this,"filter",{callback:b,target:c})},filterBy:function(b,c){return null==c&&(c=null),a.call(this,"filterBy",{key:b,value:c})},find:function(b,c){return null==c&&(c=null),a.call(this,"find",{callback:b,target:c})},findBy:function(b,c){return null==c&&(c=null),a.call(this,"findBy",{key:b,value:c})},first:function(){return a.call(this,"first")},invoke:function(){var b,c;return c=arguments[0],b=2<=arguments.length?i.call(arguments,1):[],a.call(this,"invoke",{methodName:c,args:b})},isAny:function(b,c){return null==c&&(c=null),a.call(this,"isAny",{key:b,value:c})},isEvery:function(b,c){return null==c&&(c=null),a.call(this,"isEvery",{key:b,value:c})},join:function(b){return null==b&&(b=void 0),a.call(this,"join",{separator:b})},last:function(){return a.call(this,"last")},length:function(){return a.call(this,"length")},map:function(b,c){return null==c&&(c=null),a.call(this,"map",{callback:b,target:c})},mapBy:function(b){return a.call(this,"mapBy",{key:b})},nonEmpty:function(){return a.call(this,"nonEmpty")},nonEmptyBy:function(b){return a.call(this,"nonEmptyBy",{key:b})},reduce:function(b,c){return a.call(this,"reduce",{callback:b,initialValue:c})},reject:function(b,c){return null==c&&(c=null),a.call(this,"reject",{callback:b,target:c})},rejectBy:function(b,c){return null==c&&(c=null),a.call(this,"rejectBy",{key:b,value:c})},reverse:function(){return a.call(this,"reverse")},setEach:function(b,c){return a.call(this,"setEach",{key:b,value:c})},skip:function(b){return a.call(this,"slice",{begin:b,end:void 0})},slice:function(b,c){return null==c&&(c=void 0),a.call(this,"slice",{begin:b,end:c})},sort:function(b){return null==b&&(b=e),a.call(this,"sort",{compareFunction:b})},sortBy:function(b,c){return null==c&&(c=void 0),Em.isEmpty(c)&&(c=e),a.call(this,"sortBy",{key:b,compareFunction:c})},sortNumerically:function(){return a.call(this,"sort",{compareFunction:f})},sortNumericallyBy:function(b){return a.call(this,"sortBy",{key:b,compareFunction:f})},take:function(b){return a.call(this,"slice",{begin:0,end:b})},toSentence:function(b,c){return null==b&&(b="and"),null==c&&(c=!1),a.call(this,"toSentence",{conjunction:b,oxfordComma:c})},uniq:function(){return a.call(this,"uniq")},without:function(b){return a.call(this,"without",{value:b})}}),Enumerology.Pipeline=g}.call(this),function(){Enumerology.ReduceBase=Em.Object.extend({initialValue:void 0,matchCount:0,apply:function(a,b){var c=this;return this.set("dependentKey",a),Em.reduceComputed(a,{initialValue:this.get("initialValue"),initialize:function(a,d,e){return d.binding=b,Em.isEmpty(c.reset)?void 0:c.reset.call(c,a,d,e)},addedItem:function(a,b,d){return Em.isEmpty(c.addedItem)?void 0:c.addedItem.call(c,a,b,d)},removedItem:function(a,b,d){return Em.isEmpty(c.removedItem)?void 0:c.removedItem.call(c,a,b,d)}})}}),Enumerology.ReduceBase.reopenClass({isReduce:!0,isFilter:Em.computed.not("isReduce")})}.call(this),function(){Enumerology.Transform=Em.Object.create()}.call(this),function(){Enumerology.TransformByMixin=Em.Mixin.create({dependencies:function(){return".@each."+this.get("key")}.property("key")})}.call(this),function(){Enumerology.TransformMixin=Em.Mixin.create({dependencies:".[]",initialValue:null})}.call(this),function(){Enumerology.Filter=Enumerology.FilterBase.extend(Enumerology.TransformMixin)}.call(this),function(){Enumerology.FilterBy=Enumerology.FilterBase.extend(Enumerology.TransformByMixin)}.call(this),function(){Enumerology.Reduce=Enumerology.ReduceBase.extend(Enumerology.TransformMixin)}.call(this),function(){Enumerology.ReduceBy=Enumerology.ReduceBase.extend(Enumerology.TransformByMixin)}.call(this),function(){var a;a=Enumerology.Reduce.extend({initialValue:!1,matchCount:0,addedItem:function(a,b,c){var d;return d=this.get("callback"),d.call(c.binding,b)&&this.incrementProperty("matchCount"),this.get("matchCount")>0},removedItem:function(a,b,c){var d;return d=this.get("callback"),d.call(c.binding,b)&&this.decrementProperty("matchCount"),this.get("matchCount")>0}}),Enumerology.Transform.Any=a}.call(this),function(){var a;a=Enumerology.Filter.extend({addedItem:function(a,b,c){var d,e;return e=null!=b,d=this.get("subArray").addItem(c.index,e),e&&a.insertAt(d,b),a},removedItem:function(a,b,c){var d,e;return e=null!=b,d=this.get("subArray").removeItem(c.index,e),d>-1&&a.removeAt(d),a}}),Enumerology.Transform.Compact=a}.call(this),function(){var a;a=Enumerology.FilterBy.extend({addedItem:function(a,b,c){var d,e,f;return e=this.get("key"),f=null!=b.get(e),d=this.get("subArray").addItem(c.index,f),f&&a.insertAt(d,b),a},removedItem:function(a,b,c){var d,e,f;return e=this.get("key"),f=null!=b.get(e),d=this.get("subArray").removeItem(c.index,f),d>-1&&a.removeAt(d),a}}),Enumerology.Transform.CompactBy=a}.call(this),function(){var a;a=Enumerology.Reduce.extend({initialValue:!1,matchCount:0,addedItem:function(a,b){return b===this.get("obj")&&this.incrementProperty("matchCount"),this.get("matchCount")>0},removedItem:function(a,b){return b===this.get("obj")&&this.decrementProperty("matchCount"),this.get("matchCount")>0}}),Enumerology.Transform.Contains=a}.call(this),function(){var a;a=Enumerology.Reduce.extend({initialValue:!0,matchCount:0,addedItem:function(){return this.incrementProperty("matchCount"),0===this.get("matchCount")},removedItem:function(){return this.decrementProperty("matchCount"),0===this.get("matchCount")}}),Enumerology.Transform.Empty=a}.call(this),function(){var a;a=Enumerology.ReduceBy.extend({initialValue:!0,matchCount:0,addedItem:function(a,b){var c;return c=this.get("key"),null!=b.get(c)&&this.incrementProperty("matchCount"),0===this.get("matchCount")},removedItem:function(a,b){var c;return c=this.get("key"),null!=b.get(c)&&this.decrementProperty("matchCount"),0===this.get("matchCount")}}),Enumerology.Transform.EmptyBy=a}.call(this),function(){var a;a=Enumerology.Reduce.extend({initialValue:!0,matchCount:0,totalElements:0,reset:function(){return this.set("matchCount",0)},addedItem:function(a,b,c){var d,e;return d=this.get("callback"),e=!!d.call(c.binding,b),this.incrementProperty("totalElements"),e&&this.incrementProperty("matchCount"),this.get("matchCount")===this.get("totalElements")},removedItem:function(a,b,c){var d,e;return d=this.get("callback"),e=!!d.call(c.binding,b),this.decrementProperty("totalElements"),e&&this.decrementProperty("matchCount"),this.get("matchCount")===this.get("totalElements")}}),Enumerology.Transform.Every=a}.call(this),function(){var a;a=Enumerology.Filter.extend({addedItem:function(a,b,c){var d,e,f;return d=this.get("callback"),f=!!d.call(c.binding,b),e=this.get("subArray").addItem(c.index,f),f&&a.insertAt(e,b),a},removedItem:function(a,b,c){var d;return d=this.get("subArray").removeItem(c.index),d>-1&&a.get("length")>d&&a.removeAt(d),a}}),Enumerology.Transform.Filter=a}.call(this),function(){var a;a=Enumerology.FilterBy.extend({addedItem:function(a,b,c){var d,e,f,g;return e=this.get("key"),g=this.get("value"),f=b.get(e)===g,d=this.get("subArray").addItem(c.index,f),f&&a.insertAt(d,b),a},removedItem:function(a,b,c){var d,e,f,g;return e=this.get("key"),g=this.get("value"),f=b.get(e)===g,d=this.get("subArray").removeItem(c.index),d>-1&&a.get("length")>d&&a.removeAt(d),a}}),Enumerology.Transform.FilterBy=a}.call(this),function(){var a;a=Enumerology.Reduce.extend({initialValue:function(){return void 0},init:function(){return this.set("matches",Em.A()),this.set("subArray",new Em.SubArray),this._super()},addedItem:function(a,b,c){var d,e,f,g,h;return d=this.get("callback"),f=d.call(c.binding,b),h=this.get("subArray"),e=h.addItem(c.index,f),g=this.get("matches"),f&&g.insertAt(e,b),g.get("firstObject")},removedItem:function(a,b,c){var d,e,f,g,h;return d=this.get("callback"),f=d.call(c.binding,b),h=this.get("subArray"),e=h.removeItem(c.index),g=this.get("matches"),e>-1&&g.get("length")>e&&g.removeAt(e),g.get("firstObject")}}),Enumerology.Transform.Find=a}.call(this),function(){var a;a=Enumerology.ReduceBy.extend({initialValue:function(){return void 0},init:function(){return this.set("matches",Em.A()),this.set("subArray",new Em.SubArray),this._super()},addedItem:function(a,b,c){var d,e,f,g,h,i;return e=this.get("key"),i=this.get("value"),f=b.get(e)===i,h=this.get("subArray"),d=h.addItem(c.index,f),g=this.get("matches"),f&&g.insertAt(d,b),g.get("firstObject")},removedItem:function(a,b,c){var d,e,f,g,h,i;return e=this.get("key"),i=this.get("value"),f=b.get(e)===i,h=this.get("subArray"),d=h.removeItem(c.index),g=this.get("matches"),d>-1&&g.get("length")>d&&g.removeAt(d),g.get("firstObject")}}),Enumerology.Transform.FindBy=a}.call(this),function(){var a;a=Enumerology.Reduce.extend({initialValue:function(){return void 0},init:function(){return this.set("content",Em.A())},addedItem:function(a,b,c){var d;return d=this.get("content"),d.insertAt(c.index,b),d.get("firstObject")},removedItem:function(a,b,c){var d;return d=this.get("content"),d.removeAt(c.index),d.get("firstObject")}}),Enumerology.Transform.First=a}.call(this),function(){var a;a=Enumerology.Filter.extend({addedItem:function(a,b,c){var d,e,f;return f=this.get("methodName"),d=this.getWithDefault("args",[]),e=b.get(f),e.apply(b,d),a.insertAt(c.index,b),a},removedItem:function(a,b,c){return a.removeAt(c.index),a}}),Enumerology.Transform.Invoke=a}.call(this),function(){var a;a=Enumerology.ReduceBy.extend({initialValue:!1,matchCount:0,addedItem:function(a,b){var c,d;return c=this.get("key"),d=this.get("value"),b.get(c)===d&&this.incrementProperty("matchCount"),this.get("matchCount")>0},removedItem:function(a,b){var c,d;return c=this.get("key"),d=this.get("value"),b.get(c)===d&&this.decrementProperty("matchCount"),this.get("matchCount")>0}}),Enumerology.Transform.IsAny=a}.call(this),function(){var a;a=Enumerology.ReduceBy.extend({initialValue:!0,matchCount:0,totalElements:0,addedItem:function(a,b){var c,d,e;return c=this.get("key"),e=this.get("value"),d=b.get(c)===e,this.incrementProperty("totalElements"),d&&this.incrementProperty("matchCount"),this.get("matchCount")===this.get("totalElements")},removedItem:function(a,b){var c,d,e;return c=this.get("key"),e=this.get("value"),d=b.get(c)===e,this.decrementProperty("totalElements"),d&&this.decrementProperty("matchCount"),this.get("matchCount")===this.get("totalElements")}}),Enumerology.Transform.IsEvery=a}.call(this),function(){var a;a=Enumerology.Reduce.extend({initialValue:"",init:function(){return this.set("content",Em.A())},addedItem:function(a,b,c){var d;return d=this.get("content"),d.insertAt(c.index,b),d.join(this.get("separator"))},removedItem:function(a,b,c){var d;return d=this.get("content"),d.removeAt(c.index),d.join(this.get("separator"))}}),Enumerology.Transform.Join=a}.call(this),function(){var a;a=Enumerology.Reduce.extend({initialValue:function(){return void 0},init:function(){return this.set("content",Em.A())},addedItem:function(a,b,c){var d;return d=this.get("content"),d.insertAt(c.index,b),d.get("lastObject")},removedItem:function(a,b,c){var d;return d=this.get("content"),d.removeAt(c.index),d.get("lastObject")}}),Enumerology.Transform.Last=a}.call(this),function(){var a;a=Enumerology.Reduce.extend({initialValue:0,addedItem:function(a){return++a},removedItem:function(a){return--a}}),Enumerology.Transform.Length=a}.call(this),function(){var a;a=Enumerology.Filter.extend({addedItem:function(a,b,c){var d,e;return d=this.get("callback"),e=d.call(c.binding,b),a.insertAt(c.index,e),a},removedItem:function(a,b,c){return a.removeAt(c.index),a}}),Enumerology.Transform.Map=a}.call(this),function(){var a;a=Enumerology.FilterBy.extend({addedItem:function(a,b,c){var d;return d=this.get("key"),a.insertAt(c.index,b.get(d)),a},removedItem:function(a,b,c){return a.removeAt(c.index),a}}),Enumerology.Transform.MapBy=a}.call(this),function(){var a;a=Enumerology.Reduce.extend({initialValue:!1,count:0,addedItem:function(){return this.incrementProperty("count"),this.get("count")>0},removedItem:function(){return this.decrementProperty("count"),this.get("count")>0}}),Enumerology.Transform.NonEmpty=a}.call(this),function(){var a;a=Enumerology.ReduceBy.extend({initialValue:!1,count:0,addedItem:function(a,b){return Em.isEmpty(b.get(this.get("key")))||this.incrementProperty("count"),this.get("count")>0},removedItem:function(a,b){return Em.isEmpty(b.get(this.get("key")))||this.decrementProperty("count"),this.get("count")>0}}),Enumerology.Transform.NonEmptyBy=a}.call(this),function(){var a;a=Enumerology.Reduce.extend({addedItem:function(a,b,c){var d;return d=this.get("callback"),d.call(c.binding,a,b,c.index,c.arrayChanged)}}),Enumerology.Transform.Reduce=a}.call(this),function(){var a;a=Enumerology.Filter.extend({addedItem:function(a,b,c){var d,e,f;return d=this.get("callback"),f=!d.call(c.binding,b),e=this.get("subArray").addItem(c.index,f),f&&a.insertAt(e,b),a},removedItem:function(a,b,c){var d;return d=this.get("subArray").removeItem(c.index),d>-1&&a.get("length")>d&&a.removeAt(d),a}}),Enumerology.Transform.Reject=a}.call(this),function(){var a;a=Enumerology.FilterBy.extend({addedItem:function(a,b,c){var d,e,f,g;return e=this.get("key"),g=this.get("value"),f=b.get(e)!==g,d=this.get("subArray").addItem(c.index,f),f&&a.insertAt(d,b),a},removedItem:function(a,b,c){var d,e,f,g;return e=this.get("key"),g=this.get("value"),f=b.get(e)!==g,d=this.get("subArray").removeItem(c.index),d>-1&&a.get("length")>d&&a.removeAt(d),a}}),Enumerology.Transform.RejectBy=a}.call(this),function(){var a;a=Enumerology.Filter.extend({addedItem:function(a,b,c){var d;return d=a.get("length")-c.index,a.insertAt(d,b),a},removedItem:function(a,b,c){var d;return d=a.get("length")-c.index,a.removeAt(d-1),a}}),Enumerology.Transform.Reverse=a}.call(this),function(){var a;a=Enumerology.FilterBy.extend({addedItem:function(a,b,c){var d,e;return d=this.get("key"),e=this.get("value"),b.set(d,e),c.arrayChanged},removedItem:function(a,b,c){return c.arrayChanged}}),Enumerology.Transform.SetEach=a}.call(this),function(){var a;a=Enumerology.Filter.extend({addedItem:function(a,b,c){return c.arrayChanged.slice(this.get("begin"),this.get("end"))},removedItem:function(a,b,c){return c.arrayChanged.slice(this.get("begin"),this.get("end"))}}),Enumerology.Transform.Slice=a}.call(this),function(){var a;a=Enumerology.Filter.extend({init:function(){return this._super(),this.set("positionStore",{})},addedItem:function(a,b,c){var d,e,f,g,h,i,j;if(e=this.get("compareFunction"),f=function(a,b){return e.call(c.binding,a,b)},h=this.get("positionStore"),0===a.get("length"))return h[c.index]=0,a.insertAt(0,b),a;for(g=i=0,j=a.get("length")-1;j>=0?j>=i:i>=j;g=j>=0?++i:--i){if(d=f(b,a.objectAt(g)),-1===d)return h[c.index]=g,a.insertAt(g,b),a;if(0===d)return h[c.index]=g+1,a.insertAt(g+1,b),a}return h[c.index]=a.get("length"),a.insertAt(a.get("length"),b)},removedItem:function(a,b,c){var d;return d=this.get("positionStore"),a.removeAt(d[c.index]),delete d[c.index],a}}),Enumerology.Transform.Sort=a}.call(this),function(){var a;a=Enumerology.FilterBy.extend({init:function(){return this._super(),this.set("positionStore",{})},addedItem:function(a,b,c){var d,e,f,g,h,i,j,k;if(e=this.get("compareFunction"),h=this.get("key"),f=function(a,b){return e.call(c.binding,a,b)},i=this.get("positionStore"),0===a.get("length"))return i[c.index]=0,a.insertAt(0,b),a;for(g=j=0,k=a.get("length")-1;k>=0?k>=j:j>=k;g=k>=0?++j:--j){if(d=f(b.get(h),a.objectAt(g).get(h)),-1===d)return i[c.index]=g,a.insertAt(g,b),a;if(0===d)return i[c.index]=g+1,a.insertAt(g+1,b),a}return i[c.index]=a.get("length"),a.insertAt(a.get("length"),b)},removedItem:function(a,b,c){var d;return d=this.get("positionStore"),a.removeAt(d[c.index]),delete d[c.index],a}}),Enumerology.Transform.SortBy=a}.call(this),function(){var a;a=Enumerology.Reduce.extend({initialValue:"",addedItem:function(a,b,c){var d,e,f,g,h;return d=c.arrayChanged,g=d.slice(0,-1),f=d.slice(-1),e=this.get("conjunction"),h=this.get("oxfordComma")?",":"",""+g.join(", ")+h+" "+e+" "+f},removedItem:function(a,b,c){var d,e,f,g,h;return d=c.arrayChanged,g=d.slice(0,-1),f=d.slice(-1),e=this.get("conjunction"),h=this.get("oxfordComma")?",":"",""+g.join(", ")+h+" "+e+" "+f}}),Enumerology.Transform.ToSentence=a}.call(this),function(){var a;a=Enumerology.Filter.extend({addedItem:function(a,b,c){var d,e;return e=0===a.get("length")||!a.any(function(a){return a===b}),d=this.get("subArray").addItem(c.index,e),d>=0&&a.insertAt(d,b),a},removedItem:function(a,b,c){var d;return d=this.get("subArray").removeItem(c.index),d>=0&&a.removeAt(d),a}}),Enumerology.Transform.Uniq=a}.call(this),function(){var a;a=Enumerology.Filter.extend(),Enumerology.Transform.Without=a}.call(this);